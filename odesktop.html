<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FireFly India</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      overflow: hidden; /* Prevent scrolling */
      background-color: #1a1a1a; /* Default dark background color */
      background-size: cover; /* Ensure the background fits the screen */
    }

    .taskbar {
      position: fixed;
      bottom: 0;
      width: 100%;
      height: 50px;
      background: rgba(105, 105, 105, 0.8); /* Dark grey taskbar with opacity */
      backdrop-filter: blur(10px); /* Backdrop blur effect */
      display: flex;
      align-items: center;
      justify-content: center; /* Align icons in the X-direction */
      padding: 0 20px;
    }

    .desktop {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 50px; /* Adjusted for taskbar height */
      overflow: hidden;
      padding: 20px;
    }

    .desktop-icons {
      display: flex;
      flex-direction: column; /* Change to vertical layout */
      align-items: flex-start; /* Align icons to the left */
    }

    .icon {
      text-align: center;
      margin: 10px 0; /* Adjusted margin */
      cursor: pointer;
      width: 10%; /* Ensure icons occupy full width */
    }

    .icon img {
      width: 50px;
      height: 50px;
      margin-bottom: 5px;
    }

    .iframe-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
      background: #fff;
    }

    .fullscreen-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .window-controls {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 5px;
      z-index: 1001;
    }

    .control-button {
      background-color: #f44336; /* Red */
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 16px;
      border-radius: 5px;
    }

    .control-button.minimize {
      background-color: #ffeb3b; /* Yellow */
    }

    .control-button.fullscreen {
      background-color: #4caf50; /* Green */
    }

    .minimized-icons {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .minimized-icon {
      text-align: center;
      cursor: pointer;
    }

    .minimized-icon img {
      width: 30px;
      height: 30px;
    }

    .header {
      position: absolute;
      top: 0;
      width: 100%;
      height: 30px;
      background-color: #333;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 10px;
      z-index: 1001;
    }

    .header .title {
      flex-grow: 1;
      margin-left: 10px;
    }

    .header .controls {
      display: flex;
      gap: 5px;
    }

    .header .controls .control-button {
      padding: 2px 8px;
    }

    .context-menu {
      border-radius: 8%;
      position: fixed;
      z-index: 10000;
      display: none;
      background-color: #0000006b;
      border: 1px solid #ccc;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      padding: 5px 0;
    }

    .context-menu ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    .context-menu ul li {
      padding: 8px 15px;
      cursor: pointer;
    }

    .context-menu ul li:hover {
      background-color: #f0f0f057;
    }

    .context-menu.show {
      display: block;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      margin: 0;
    }

    .modal-body {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
    }

    .modal-body img {
      width: 100%;
      cursor: pointer;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 20px;
    }

    .modal-footer button {
      margin-left: 10px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    .modal-footer .ok-btn {
      background-color: #4caf50; /* Green */
      color: white;
    }

    .modal-footer .cancel-btn {
      background-color: #f44336; /* Red */
      color: white;
    }
  </style>
</head>
<body>
  <div class="desktop" id="desktop">
    <div class="desktop-icons">
      <div class="icon" onclick="openSite('https://divyanshugupta0.github.io/fireflystudyspark', 'FireFly Spark', 'hot-deal.png')">
        <img src="hot-deal.png" alt="Icon 1"><br>
        <span>FireFly Spark</span>
      </div>
      <div class="icon" onclick="openSite('https://fireflyindia.000webhostapp.com', 'Portfolio', 'portfolio.png')">
        <img src="portfolio.png" alt="Icon 2"><br>
        <span>Portfolio</span>
      </div>
      <div class="icon" onclick="openSite('https://divyanshugupta0.github.io/FireCalc', 'Fire calc', 'money.png')">
        <img src="money.png" alt="Icon 3"><br>
        <span>Fire calc</span>
      </div>
      <div class="icon" onclick="openSite('https://divyanshugupta0.github.io/fireflycompiler', 'FireFly Compiler', 'programming.png')">
        <img src="programming.png" alt="Icon 4"><br>
        <span>FireFly Compiler</span>
      </div>
      <div class="icon" onclick="openSite('https://www.google.com/search?igu=1', 'Sparked Youtube', 'youtube.png')">
        <img src="youtube.png" alt="Icon 5"><br>
        <span>Sparked Youtube</span>
      </div>
      <div class="icon" onclick="openSite('https://www.instagram.com/accounts/login/?hl=en', 'Sparked Instagram', 'instagram.png')">
        <img src="instagram.png" alt="Icon 6"><br>
        <span>Sparked Instagram</span>
      </div>
      <div class="icon" onclick="openSite('https://www.facebook.com', 'Sparked Facebook', 'facebook.png')">
        <img src="facebook.png" alt="Icon 7"><br>
        <span>Sparked Facebook</span>
      </div>
    </div>
  </div>

  <div class="taskbar">
    <div class="minimized-icons" id="minimizedIcons">
      <!-- Minimized iframes will appear here -->
    </div>
  </div>

  <div id="contextMenu" class="context-menu">
    <ul>
      <li id="open" style="display: none;">Open</li>
      <li id="reload">Refresh</li>
      <li id="share">Share</li>
      <li id="changeBackground">Change Background</li>
      <li id="terminal">Terminal</li>
    </ul>
  </div>

  <div id="wallpaperModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Select a Wallpaper</h2>
      </div>
      <div class="modal-body" id="wallpaperGrid">
        <!-- Wallpapers will be dynamically added here -->
      </div>
      <div class="modal-footer">
        <button class="ok-btn" onclick="applyWallpaper()">Apply</button>
        <button class="cancel-btn" onclick="closeWallpaperModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    const contextMenu = document.getElementById('contextMenu');
    let desktopIcons = document.querySelectorAll('.icon');
    let wallpaperModal = document.getElementById('wallpaperModal');
    let selectedWallpaper = null;

    document.addEventListener('click', (e) => {
      contextMenu.classList.remove('show');
    });

    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      const targetElement = e.target;
      if (targetElement.classList.contains('icon') || targetElement.closest('.icon')) {
        const iconElement = targetElement.classList.contains('icon') ? targetElement : targetElement.closest('.icon');
        showContextMenu(e.pageX, e.pageY, iconElement);
      } else {
        showContextMenu(e.pageX, e.pageY);
      }
    });

    function showContextMenu(x, y, iconElement) {
      contextMenu.style.left = `${x}px`;
      contextMenu.style.top = `${y}px`;
      contextMenu.classList.add('show');

      const openMenuItem = document.getElementById('open');
      if (iconElement) {
        openMenuItem.style.display = 'block';
        openMenuItem.onclick = () => openIcon(iconElement);
      } else {
        openMenuItem.style.display = 'none';
      }
    }

    function openIcon(iconElement) {
      const onClick = iconElement.getAttribute('onclick');
      if (onClick) {
        eval(onClick);
      }
    }

    function openSite(url, title, iconSrc) {
      const iframeContainer = document.createElement('div');
      iframeContainer.className = 'iframe-container';

      const header = document.createElement('div');
      header.className = 'header';

      const titleElem = document.createElement('span');
      titleElem.className = 'title';
      titleElem.textContent = title;

      const controls = document.createElement('div');
      controls.className = 'controls';

      const minimizeButton = document.createElement('button');
      minimizeButton.className = 'control-button minimize';
      minimizeButton.textContent = '-';
      minimizeButton.onclick = () => minimizeIframe(iframeContainer, title, iconSrc);

      const fullscreenButton = document.createElement('button');
      fullscreenButton.className = 'control-button fullscreen';
      fullscreenButton.textContent = '[ ]';
      fullscreenButton.onclick = () => toggleFullscreen(iframe);

      const closeButton = document.createElement('button');
      closeButton.className = 'control-button';
      closeButton.textContent = 'x';
      closeButton.onclick = () => iframeContainer.remove();

      controls.appendChild(minimizeButton);
      controls.appendChild(fullscreenButton);
      controls.appendChild(closeButton);

      header.appendChild(titleElem);
      header.appendChild(controls);

      const iframe = document.createElement('iframe');
      iframe.src = url;
      iframe.className = 'fullscreen-iframe';

      iframeContainer.appendChild(header);
      iframeContainer.appendChild(iframe);
      document.body.appendChild(iframeContainer);
    }

    function minimizeIframe(iframeContainer, title, iconSrc) {
      iframeContainer.style.display = 'none';
      const minimizedIcon = document.createElement('div');
      minimizedIcon.className = 'minimized-icon';
      minimizedIcon.innerHTML = `<img src="${iconSrc}" alt="${title}">`;

      minimizedIcon.onclick = () => {
        iframeContainer.style.display = 'block';
        minimizedIcon.remove();
      };

      document.getElementById('minimizedIcons').appendChild(minimizedIcon);
    }

    function toggleFullscreen(iframe) {
      if (!document.fullscreenElement) {
        iframe.requestFullscreen().catch((err) => {
          alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
        });
      } else {
        document.exitFullscreen();
      }
    }

    document.getElementById('changeBackground').onclick = function () {
      openWallpaperModal();
    };

    const wallpapers = [
      'wall1.jpg',
      'wall2.jpg',
      'wall3.jpg',
      'wall4.jpg',
      'wall5.jpg',
      'wall6.jpg',
      'wallco.jpg'
    ];

    const wallpaperGrid = document.getElementById('wallpaperGrid');
    wallpapers.forEach((wallpaper) => {
      const img = document.createElement('img');
      img.src = wallpaper;
      img.onclick = () => selectWallpaper(img);
      wallpaperGrid.appendChild(img);
    });

    function openWallpaperModal() {
      wallpaperModal.style.display = 'block';
    }

    function closeWallpaperModal() {
      wallpaperModal.style.display = 'none';
    }

    function selectWallpaper(img) {
      if (selectedWallpaper) {
        selectedWallpaper.style.border = 'none';
      }
      selectedWallpaper = img;
      img.style.border = '2px solid #4caf50';
    }

    function applyWallpaper() {
      if (selectedWallpaper) {
        document.body.style.backgroundImage = `url(${selectedWallpaper.src})`;
        closeWallpaperModal();
      }
    }

    // Move icons to center of taskbar
    document.addEventListener('DOMContentLoaded', () => {
      const minimizedIconsContainer = document.getElementById('minimizedIcons');
      const taskbar = document.querySelector('.taskbar');
      taskbar.insertBefore(minimizedIconsContainer, taskbar.firstChild);

      // Update to tile icons horizontally without names
      const minimizedIcons = document.querySelectorAll('.minimized-icon');
      minimizedIcons.forEach(icon => {
        icon.querySelector('span')?.remove(); // Remove the name below the icons if present
      });
    });

    // Context Menu Button Handlers
    document.getElementById('reload').onclick = function () {
      location.reload();
    };

    document.getElementById('share').onclick = function () {
      const shareData = {
        title: 'FireFly India',
        text: 'Check out this cool desktop interface!',
        url: window.location.href
      };

      if (navigator.share) {
        navigator.share(shareData)
          .then(() => console.log('Share successful'))
          .catch((error) => console.log('Sharing failed', error));
      } else {
        alert('Web Share API not supported in your browser.');
      }
    };

    document.getElementById('terminal').onclick = function () {
      openSite('https://your-terminal-url.com', 'Terminal', 'terminal-icon.png');
    };

  </script>
</body>
</html>
